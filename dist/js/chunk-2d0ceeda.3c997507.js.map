{"version":3,"sources":["webpack:///./src/views/user/AddrEdit.vue?531e","webpack:///src/views/user/AddrEdit.vue","webpack:///./src/views/user/AddrEdit.vue?6ddb","webpack:///./src/views/user/AddrEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","receiverErrmsg","on","$event","model","value","callback","$$v","receiver","expression","phoneErrmsg","phone","addressErrmsg","address","staticStyle","onSaveClick","_v","$route","query","editType","onDeleteClick","_e","staticRenderFns","components","data","methods","length","mounted","component"],"mappings":"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","file":"js/chunk-2d0ceeda.3c997507.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-field',{attrs:{\"size\":\"small\",\"clearable\":\"\",\"label\":\"收货人姓名\",\"maxlength\":\"10\",\"placeholder\":\"请输入收货人姓名\",\"error-message\":_vm.receiverErrmsg},on:{\"blur\":function($event){_vm.receiverErrmsg = ''}},model:{value:(_vm.receiver),callback:function ($$v) {_vm.receiver=$$v},expression:\"receiver\"}}),_c('van-field',{attrs:{\"size\":\"small\",\"clearable\":\"\",\"label\":\"手机号码\",\"type\":\"number\",\"maxlength\":\"11\",\"placeholder\":\"请输入手机号码\",\"error-message\":_vm.phoneErrmsg},on:{\"blur\":function($event){_vm.phoneErrmsg = ''}},model:{value:(_vm.phone),callback:function ($$v) {_vm.phone=$$v},expression:\"phone\"}}),_c('van-field',{attrs:{\"size\":\"small\",\"clearable\":\"\",\"autosize\":true,\"type\":\"textarea\",\"rows\":\"4\",\"label\":\"收货地址\",\"placeholder\":\"请输入收货地址\",\"error-message\":_vm.addressErrmsg},on:{\"blur\":function($event){_vm.addressErrmsg = ''}},model:{value:(_vm.address),callback:function ($$v) {_vm.address=$$v},expression:\"address\"}}),_c('div',{staticStyle:{\"padding\":\"15px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":_vm.onSaveClick}},[_vm._v(\"保存地址\")]),_c('div',{staticStyle:{\"padding\":\"5px\"}}),(this.$route.query.editType != 'addNewAddr')?_c('van-button',{attrs:{\"round\":\"\",\"type\":\"danger\",\"size\":\"large\"},on:{\"click\":_vm.onDeleteClick}},[_vm._v(\"删除地址\")]):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <van-field\n      size=\"small\"\n      clearable\n      v-model=\"receiver\"\n      label=\"收货人姓名\"\n      maxlength=\"10\"\n      placeholder=\"请输入收货人姓名\"\n      @blur=\"receiverErrmsg = ''\"\n      :error-message=\"receiverErrmsg\"\n    />\n    <van-field\n      size=\"small\"\n      clearable\n      v-model=\"phone\"\n      label=\"手机号码\"\n      type=\"number\"\n      maxlength=\"11\"\n      placeholder=\"请输入手机号码\"\n      @blur=\"phoneErrmsg = ''\"\n      :error-message=\"phoneErrmsg\"\n    />\n    <van-field\n      size=\"small\"\n      clearable\n      :autosize=\"true\"\n      type=\"textarea\"\n      rows=\"4\"\n      v-model=\"address\"\n      label=\"收货地址\"\n      placeholder=\"请输入收货地址\"\n      @blur=\"addressErrmsg = ''\"\n      :error-message=\"addressErrmsg\"\n    />\n\n    <div style=\"padding: 15px;\">\n      <van-button round type=\"primary\" size=\"large\" @click=\"onSaveClick\"\n        >保存地址</van-button\n      >\n      <div style=\"padding: 5px;\" />\n      <van-button\n        v-if=\"this.$route.query.editType != 'addNewAddr'\"\n        round\n        type=\"danger\"\n        size=\"large\"\n        @click=\"onDeleteClick\"\n        >删除地址</van-button\n      >\n    </div>\n  </div>\n</template>\n<script>\nimport { Field, Toast, Button } from \"vant\"\nimport { axios, API_URL } from \"../../api\"\nexport default {\n  components: {\n    [Field.name]: Field,\n    [Button.name]: Button\n  },\n  data() {\n    return {\n      receiver: \"\",\n      receiverErrmsg: \"\",\n      phone: \"\",\n      phoneErrmsg: \"\",\n      address: \"\",\n      addressErrmsg: \"\"\n    }\n  },\n\n  methods: {\n    onDeleteClick() {\n      axios\n        .delete(API_URL + \"address\", {\n          headers: {\n            Authorization: this.$store.state.customer_token\n          },\n          params: {\n            address_id: this.$route.query.address_id\n          }\n        })\n        .then(() => {\n          Toast(\"删除地址成功\")\n          this.$router.go(-1)\n        })\n        .catch(err => {\n          if (err.response.status == 401) {\n            this.$router.push({ name: \"login\" })\n          }\n          console.error(err)\n        })\n    },\n    onSaveClick() {\n      /* 信息输入逻辑与错误提示 */\n      this.receiverErrmsg = this.receiver.length > 0 ? null : \"请输入收货人姓名\"\n      this.phoneErrmsg = this.phone.length == 11 ? null : \"输入电话号码格式错误\"\n      this.addressErrmsg = this.address.length > 0 ? null : \"请输入地址信息\"\n      if (this.receiverErrmsg || this.phoneErrmsg || this.addressErrmsg) return\n\n      if (this.$route.query.editType == \"addNewAddr\") {\n        axios\n          .post(\n            API_URL + \"address\",\n            {\n              receiver: this.receiver,\n              phone: this.phone,\n              address: this.address\n            },\n            {\n              headers: {\n                Authorization: this.$store.state.customer_token\n              }\n            }\n          )\n          .then(() => {\n            Toast(\"地址保存成功\")\n            this.$router.go(-1)\n          })\n          .catch(err => {\n            if (err.response.status == 401) {\n              this.$router.push({ name: \"login\" })\n            }\n            console.error(err)\n          })\n      } else if (this.$route.query.editType == \"editOldAddr\") {\n        axios\n          .put(\n            API_URL + \"address\",\n            {\n              receiver: this.receiver,\n              phone: this.phone,\n              address: this.address,\n              address_id: this.$route.query.address_id\n            },\n            {\n              headers: {\n                Authorization: this.$store.state.customer_token\n              }\n            }\n          )\n          .then(() => {\n            Toast(\"地址保存成功\")\n            this.$router.go(-1)\n          })\n          .catch(err => {\n            if (err.response.status == 401) {\n              this.$router.push({ name: \"login\" })\n            }\n            console.error(err)\n          })\n      }\n    }\n  },\n  mounted: function() {\n    this.receiver = this.$route.query.receiver\n    this.phone = this.$route.query.phone\n    this.address = this.$route.query.address\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddrEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddrEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddrEdit.vue?vue&type=template&id=84e8217c&\"\nimport script from \"./AddrEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./AddrEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}