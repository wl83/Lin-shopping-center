(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ec0ae7d2"],{"4bd5":function(e,t,i){"use strict";i.r(t);var a,s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("van-uploader",{attrs:{multiple:"","max-count":5,"result-type":"dataUrl"},model:{value:e.images,callback:function(t){e.images=t},expression:"images"}}),i("van-cell-group",[i("van-field",{attrs:{size:"large",placeholder:"请输入商品名"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),i("van-field",{attrs:{size:"large",type:"textarea",placeholder:"请输入商品描述信息"},model:{value:e.info,callback:function(t){e.info=t},expression:"info"}}),i("van-field",{attrs:{size:"large",type:"number",placeholder:"请输入商品库存"},model:{value:e.in_stock,callback:function(t){e.in_stock=t},expression:"in_stock"}}),i("van-field",{attrs:{size:"large",placeholder:"请输入商品原价"},model:{value:e.original_price,callback:function(t){e.original_price=t},expression:"original_price"}}),i("van-field",{attrs:{size:"large",placeholder:"请输入商品现价"},model:{value:e.current_price,callback:function(t){e.current_price=t},expression:"current_price"}}),i("van-field",{attrs:{size:"large",placeholder:"请输入商品类别"},model:{value:e.item_class,callback:function(t){e.item_class=t},expression:"item_class"}})],1),i("div",{staticStyle:{position:"fixed",bottom:"0",width:"100%"}},[i("div",{staticStyle:{padding:"15px"}},[i("van-button",{attrs:{round:"",size:"large",type:"primary"},on:{click:e.onSubmitClick}},[e._v("保存设置")]),"editOld"===this.$route.params.editType?i("van-button",{staticStyle:{"margin-top":"10px"},attrs:{color:"#f44",round:"",size:"large",type:"danger"},on:{click:e.onCancelClick}},[e._v("删除商品")]):e._e()],1)])],1)},n=[],r=(i("e7e5"),i("d399")),o=(i("a481"),i("ac6a"),i("bd86")),c=(i("66b9"),i("b650")),l=(i("0653"),i("34e9")),u=(i("be7f"),i("565f")),p=(i("7f7f"),i("e930"),i("8f80")),m=i("d722"),d={components:(a={},Object(o["a"])(a,p["a"].name,p["a"]),Object(o["a"])(a,u["a"].name,u["a"]),Object(o["a"])(a,l["a"].name,l["a"]),Object(o["a"])(a,c["a"].name,c["a"]),a),data:function(){return{item_id:"",name:"",original_price:"",current_price:"",info:"",in_stock:"",item_class:"",images:[],images_rev:[]}},methods:{purify_images:function(){var e=[];return this.images.forEach((function(t){e.push(t.content.replace(/data:image\/[^;]+;base64,/i,""))})),e},addHead:function(){var e=[];return this.images_rev.forEach((function(t){e.push({content:"data:image/jpeg;base64,"+t,file:{}})})),e},onSubmitClick:function(){var e=this;this.name&&this.original_price&&this.current_price&&this.info&&this.in_stock&&this.item_class&&this.images.length?"addNew"===this.$route.params.editType?m["b"].post(m["a"]+"item/create",{images:this.purify_images(),name:this.name,original_price:this.original_price,current_price:this.current_price,in_stock:this.in_stock,info:this.info,item_class:this.item_class},{headers:{Authorization:this.$store.state.shop_token}}).then((function(){Object(r["a"])("保存商品信息成功"),e.$router.go(-1)})).catch((function(e){console.error(e)})):m["b"].put(m["a"]+"items/"+this.item_id,{images:this.purify_images(),name:this.name,original_price:this.original_price,current_price:this.current_price,item_class:this.item_class,in_stock:this.in_stock,info:this.info},{headers:{Authorization:this.$store.state.shop_token}}).then((function(){Object(r["a"])("修改商品信息成功"),e.$router.go(-1)})).catch((function(t){401==t.response.status&&e.$router.push({name:"shopLogin"}),console.error(t)})):Object(r["a"])("请填写所有项")},onCancelClick:function(){var e=this;m["b"].delete(m["a"]+"items/"+this.item_id,{headers:{Authorization:this.$store.state.shop_token}}).then((function(){Object(r["a"])("删除商品成功"),e.$router.go(-1)})).catch((function(t){401==t.response.status&&e.$router.push({name:"shopLogin"}),console.error(t)}))}},mounted:function(){var e=this;"addNew"!=this.$route.params.editType&&(this.item_id=this.$route.params.item_id,m["b"].get(m["a"]+"items/"+this.item_id,{}).then((function(t){e.name=t.data.name,e.current_price=t.data.current_price,e.original_price=t.data.original_price,e.in_stock=t.data.in_stock,e.info=t.data.info,e.sales=t.data.sales,e.shop_id=t.data.shop_id,e.item_class=t.data.item_class,e.images_rev=t.data.images,e.images=e.addHead(e.images_rev)})).catch((function(t){401==t.response.status&&e.$router.push({name:"shopLogin"}),console.error(t)})))}},h=d,f=i("2877"),_=Object(f["a"])(h,s,n,!1,null,null,null);t["default"]=_.exports},ac6a:function(e,t,i){for(var a=i("cadf"),s=i("0d58"),n=i("2aba"),r=i("7726"),o=i("32e9"),c=i("84f2"),l=i("2b4c"),u=l("iterator"),p=l("toStringTag"),m=c.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=s(d),f=0;f<h.length;f++){var _,g=h[f],b=d[g],v=r[g],k=v&&v.prototype;if(k&&(k[u]||o(k,u,m),k[p]||o(k,p,g),c[g]=m,b))for(_ in a)k[_]||n(k,_,a[_],!0)}}}]);
//# sourceMappingURL=chunk-ec0ae7d2.2beefe10.js.map